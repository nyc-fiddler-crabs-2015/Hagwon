<div ng-app="tracksApp">

  <div ng-controller="tracksCtrl" class="container">

    <h1> All Tracks </h1>

    <p class="text-center rocket"> <%= flash[:forked] if flash[:forked]%></p>

    <%= link_to "Create a New Track", categories_path, :class => "btn btn-default" %>

    <input ng-model="search" class="search" placeholder="Search by name, category, user" style="width:20%">

    <p></p>


    <button class="btn btn-primary" ng-click="updateSort('-creation')"> Most Recent </button>
    <button class="btn btn-primary" ng-click="updateSort('-popularity')"> Most popular </button>

    <div class="row">

      <div ng-repeat="track in tracks | filter:search | orderBy: sort" class="col-xs-6 col-md-3 thumbnail track_box">

        <a href="/tracks/{{track.id}}"> {{track.name}}</a>

        <div>
          by
          <a href="/users/{{track.user.id}}"> {{track.user.name}}</a>
        </div>

        <span class="pull-right">
          <span class="badge">{{track.popularity}} Users</span>

          <a href="/tracks/{{track.id}}/follow" rel="nofollow" data-method="post" class="btn btn-success">Join</a>
        </span>


      <p class="description"> {{track.resume}}</p>

      </div>
    </div>
  </div>
</div>